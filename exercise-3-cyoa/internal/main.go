package main

import (
	"flag"
	"fmt"

	"github.com/kr/pretty"
)

// Generated by https://quicktype.io
type Option struct {
	Text    string `json:"text"`
	Chapter string `json:"arc"`
}

type Chapter struct {
	Id         string
	Title      string   `json:"title"`
	Paragraphs []string `json:"story"`
	Options    []Option `json:"options"`
}

type StoryFormat map[string]Chapter

func main() {
	filePath := flag.String("file", "./story.json", "path to the input json file which would be used as the story")
	flag.Parse()

	content, err := ReadJsonFile(*filePath)
	if err != nil {
		fmt.Printf("JsonDecoder: %s", err)
	}

	for id, content := range content {
		content.Id += id
		fmt.Printf("%# v\n", pretty.Formatter(content))
	}
}
